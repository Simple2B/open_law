<div class="flex flex-col ml-6">
  <button
    type="button"
    href="#section-{{section.label}}"
    id="section-heading-{{section.id}}"
    class="text-gray-500 dark:text-gray-400 w-max">
    <!-- prettier-ignore -->
    <form
      id="rename-section-label-form-{{section.id}}"
      data-book-id="{{book.id}}"
      data-collection-id="{{collection.id}}"
      {% if sub_collection %}
      data-sub-collection-id="{{sub_collection.id}}"
      {% endif %}
      data-section-id="{{section.id}}"
      method="post"
      class="inline-block w-auto">
      {{ form_hidden_tag() }}
      <input
        class="bg-inherit border-none underline"
        value="{{section.label}}/{{section.id}}"
        type="text"
        name="label"
        id="edit-section-label-{{section.id}}"
        placeholder="Section label"
        required
        readonly
      />
      <button name="submit" type="submit"></button>
    </form>
  </button>
  <svg
    id="dropdownSectionContextButton{{section.id}}"
    data-dropdown-toggle="dropdown"
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 0 0"
    stroke-width="1.5"
    stroke="none"
    class="w-0 h-0"></svg>
  <div
    data="section-context-menu-{{section.id}}"
    id="dropdown"
    class="z-10 hidden bg-white divide-y divide-gray-800 border border-gray-800 dark:border-none dark:divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700">
    {% if current_user.is_authenticated %}
      {% set access_to_create_sections = has_permission(section, Access.C) %}
      {% set access_to_update_sections = has_permission(section, Access.U) %}
      {% set access_to_delete_sections = has_permission(section, Access.D) %}

      {% if access_to_update_sections or access_to_delete_sections %}
        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200">
          {% if access_to_update_sections %}
            <li>
              <button
                type="button"
                id="rename-section-button-{{section.id}}"
                class="w-full block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                Rename Section
              </button>
            </li>
          {% endif %}

          {% if access_to_delete_sections %}
            <li>
              <!-- prettier-ignore -->
              <button
                type="button"
                data-modal-target="delete-section-modal"
                data-modal-toggle="delete-section-modal"
                id="callDeleteSectionModal"
                data-collection-id="{{collection.id}}"
                {% if sub_collection %}
                data-sub-collection-id="{{sub_collection.id}}"
                {% endif %}
                data-section-id="{{section.id}}"
                class="w-full block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
                Delete Section
              </button>
            </li>
          {% endif %}
        </ul>
      {% endif %}

      <ul class="py-2 text-sm text-gray-700 dark:text-gray-200">
        <li>
          <button
            type="button"
            class="w-full block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            Export Section
          </button>
        </li>
      </ul>
    {% else %}
      <ul class="py-2 text-sm text-gray-700 dark:text-gray-200">
        <li>
          <button
            type="button"
            class="w-full block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white">
            Connect your wallet to do this
          </button>
        </li>
      </ul>
    {% endif %}
  </div>
</div>
